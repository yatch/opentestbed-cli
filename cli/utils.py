import base64
import logging
import os

import yaml

CONFIG_YAML_NAME = 'config.yaml'
CONFIG_YAML_PATH = os.path.join(os.path.dirname(__file__), '..',
                                CONFIG_YAML_NAME)

def get_base64_string(target_file_path):
    with open(target_file_path, 'rb') as f:
        file_size = os.path.getsize(target_file_path)
        return base64.encodebytes(f.read(file_size))

def get_default_config():
    with open(CONFIG_YAML_PATH, 'r') as f:
        return yaml.safe_load(f)

def setup_logger(verbose):
    logger = logging.getLogger()

    if verbose == 0:
        log_level = logging.ERROR
    elif verbose == 1:
        log_level = logging.INFO
    elif verbose > 1:
        log_level = logging.DEBUG
    logger.setLevel(log_level)

    if verbose > 0:
        formatter = logging.Formatter('%(asctime)s: [%(name)s] %(message)s')
    else:
        formatter = logging.Formatter('[%(name)s] %(message)s')

    ch = logging.StreamHandler()
    ch.setFormatter(formatter)
    logger.addHandler(ch)
