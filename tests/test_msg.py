import pytest

from cli.msg import escape, unescape, crc

@pytest.fixture(params=[
    {'data': b'\x7e\x7d',
     'escaped_data': b'\x7d\x5e\x7d\x5d',
     'crc': b'\xf1\xcd'}])
def fixture_vector(request):
    return request.param

def test_escape(fixture_vector):
    assert escape(fixture_vector['data']) == fixture_vector['escaped_data']

def test_unescape(fixture_vector):
    assert unescape(fixture_vector['escaped_data']) == fixture_vector['data']

def test_crc(fixture_vector):
    assert crc(fixture_vector['data']) == fixture_vector['crc']
